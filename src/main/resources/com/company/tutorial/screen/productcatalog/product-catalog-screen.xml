<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://jmix.io/schema/ui/window"
        caption="msg://productCatalogScreen.caption">
    <data>
        <collection id="productsDc" class="com.company.tutorial.entity.Product">
            <fetchPlan extends="_base">
            </fetchPlan>
            <loader id="productsDl">
                <query>
                    <![CDATA[select e from Product e]]>
                </query>
            </loader>
        </collection>
        <instance id="productDc" class="com.company.tutorial.entity.Product">
            <fetchPlan extends="_base">
                <property name="vendor" fetchPlan="_base"/>
            </fetchPlan>
            <loader id="productDl"/>
        </instance>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <layout>
        <split id="split" height="100%" orientation="horizontal" width="100%" pos="660px" reversePosition="true">
            <vbox id="lookupBox" height="100%" margin="true" spacing="true" expand="productsTable">
                <dataGrid id="productsTable" width="100%" dataContainer="productsDc" bodyRowHeight="70">
                    <actions>
                        <action id="create" type="create">
                            <properties>
                                <property name="openMode" value="DIALOG"/>
                            </properties>
                        </action>
                        <action id="edit" type="edit">
                            <properties>
                                <property name="openMode" value="DIALOG"/>
                            </properties>
                        </action>
                        <action id="remove" type="remove"/>
                    </actions>
                    <buttonsPanel alwaysVisible="true">
                        <button id="productsTableCreateBtn" action="productsTable.create"/>
                        <button id="productsTableEditBtn" action="productsTable.edit"/>
                        <button id="productsTableRemoveBtn" action="productsTable.remove"/>
                    </buttonsPanel>
                    <columns>
                        <column id="image" property="image" width="150">
                            <componentRenderer/>
                        </column>
                        <column id="productName" property="productName"/>
                        <column id="unit" property="unit"/>
                        <column id="pricePerUnit" property="pricePerUnit">
                            <textRenderer nullRepresentation="null"/>
                        </column>
                        <column id="retailPrice" property="retailPrice">
                            <textRenderer nullRepresentation="null"/>
                        </column>
                    </columns>
                </dataGrid>
            </vbox>
            <vbox id="infoBox" margin="true" spacing="true" align="TOP_CENTER" width="100%">
                <groupBox id="productInfoBox" caption="msg://productInfoBox.caption" orientation="horizontal" spacing="true"
                          stylename="borderless">
                    <form id="form" dataContainer="productDc" childrenCaptionWidth="150px" captionPosition="TOP">
                        <column width="290px">
                            <textField id="skuField" property="sku"/>
                            <textArea id="productDescriptionField" property="productDescription"/>
                        </column>
                        <column width="290px" childrenCaptionWidth="1px">
                            <image id="imageField" property="image" scaleMode="SCALE_DOWN" rowspan="2" caption=" " height="100%"
                                   alternateText=" "/>
                        </column>
                    </form>
                </groupBox>
                <groupBox id="vendorBox" caption="msg://vendorBox.caption" orientation="vertical" stylename="borderless">
                    <form id="productForm" dataContainer="productDc" childrenCaptionWidth="150px" captionPosition="TOP">
                        <column width="290px">
                            <textField property="vendor.companyName"/>
                        </column>
                        <column width="290px">
                            <textArea property="vendor.contractTerms"/>
                        </column>
                    </form>
                </groupBox>
                <groupBox id="stockBox" caption="msg://stockBox.caption" orientation="vertical" stylename="borderless">
                    <form id="stockForm" dataContainer="productDc" childrenCaptionWidth="150px" captionPosition="TOP">
                        <column width="290px">
                            <textField property="minimumStock"/>
                            <textField id="inStockField" caption="msg://inStockField.caption" datatype="int"
                                       enable="false"/>
                            <textField id="reservedSaleField" caption="msg://reservedSaleField.caption" datatype="int"
                                       enable="false"/>
                        </column>
                        <column width="290px">
                            <button id="showValuesBtn" caption="msg://showValuesBtn.caption" align="BOTTOM_CENTER"
                                    height="100%" stylename="borderless" icon="ARROW_DOWN" enable="false"/>
                            <textField id="onPurchaseOrderField" caption="msg://onPurchaseOrderField.caption" datatype="int"
                                       enable="false"/>
                            <textField id="availableField" caption="msg://availableField.caption" datatype="int"
                                       enable="false"/>
                        </column>
                    </form>
                </groupBox>
            </vbox>
        </split>
    </layout>
</window>